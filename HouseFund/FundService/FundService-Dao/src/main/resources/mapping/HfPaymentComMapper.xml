<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ciicsh.gto.afsupportcenter.housefund.fundservice.dao.HfPaymentComMapper">

	<!-- 通用查询映射结果 -->
	<resultMap id="BaseResultMap" type="com.ciicsh.gto.afsupportcenter.housefund.fundservice.entity.HfPaymentCom">
		<id column="payment_com_id" property="paymentComId" />
		<result column="payment_id" property="paymentId" />
		<result column="com_account_id" property="comAccountId" />
		<result column="hf_type" property="hfType" />
		<result column="company_id" property="companyId" />
		<result column="payment_bank" property="paymentBank" />
		<result column="remitted_amount" property="remittedAmount" />
		<result column="repair_amount" property="repairAmount" />
		<result column="remitted_count_emp" property="remittedCountEmp" />
		<result column="daozhang_amount" property="daozhangAmount" />
		<result column="daozhang_count_emp" property="daozhangCountEmp" />
		<result column="is_active" property="isActive" />
		<result column="created_time" property="createdTime" />
		<result column="modified_time" property="modifiedTime" />
		<result column="created_by" property="createdBy" />
		<result column="modified_by" property="modifiedBy" />
	</resultMap>

    <resultMap id="GetFundPaysDetailOperationDataResultMap" type="com.ciicsh.gto.afsupportcenter.housefund.fundservice.bo.HfPaymentComBo" extends="BaseResultMap">
        <result column="hf_type_name" property="hfTypeName"/>
        <result column="payment_month" property="paymentMonth"/>
        <result column="company_id" property="companyId"/>
        <result column="title" property="title"/>
        <result column="payment_bank" property="paymentBank"/>
        <result column="remitted_amount" property="remittedAmount"/>
        <result column="repair_amount" property="repairAmount"/>
        <result column="remitted_count_emp" property="remittedCountEmp"/>
        <result column="daozhang_amount" property="daozhangAmount"/>
        <result column="daozhang_count_emp" property="daozhangCountEmp"/>
    </resultMap>

    <!--查询公积金汇缴支付详细操作数据-->
    <select id="getFundPaysDetailOperationData" resultMap="GetFundPaysDetailOperationDataResultMap">
        SELECT
        ht.hf_type_name,
        p.payment_month,
        pc.company_id,
        com.title,
        pc.payment_bank,
        pc.remitted_amount,
        pc.repair_amount,
        pc.remitted_count_emp,
        pc.daozhang_amount,
        pc.daozhang_count_emp
        FROM hf_payment_com pc
        INNER JOIN hf_payment p ON p.payment_id = pc.payment_id
        INNER JOIN sal_company com ON com.company_id = pc.company_id
        INNER JOIN hf_type ht ON ht.hf_type_id = pc.hf_type
        <where>
            pc.is_active = 1
            <if test="paymentId != null and paymentId != ''">
                AND p.payment_id = #{paymentId}
            </if>
        </where>
        ORDER BY
        pc.payment_com_id
    </select>

</mapper>
