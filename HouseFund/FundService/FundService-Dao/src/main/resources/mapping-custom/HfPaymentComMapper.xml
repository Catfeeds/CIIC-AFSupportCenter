<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ciicsh.gto.afsupportcenter.housefund.fundservice.dao.HfPaymentComMapper">

    <resultMap id="CreatePaymentAccountBO" type="com.ciicsh.gto.afsupportcenter.housefund.fundservice.bo.payment.HfCreatePaymentAccountBO">
        <result column="com_account_id" property="comAccountId"/>
        <result column="company_id" property="companyId"/>
        <result column="com_account_class_id" property="comAccountClassId"/>
        <result column="payment_bank" property="paymentBank"/>
        <result column="hf_type" property="hfType"/>
        <result column="hf_account_type" property="hfAccountType"/>
    </resultMap>

	<select id="selectPaymentAccount" parameterType="java.util.List" resultMap="CreatePaymentAccountBO" >
        SELECT pa.com_account_id,acr.company_id,cac.com_account_class_id,ca.payment_bank,cac.hf_type,ca.hf_account_type
        FROM hf_payment_account pa
        INNER JOIN hf_account_com_relation acr ON acr.com_account_id=pa.com_account_id
        INNER JOIN hf_com_account_class cac ON cac.com_account_id=pa.com_account_id
        INNER JOIN hf_com_account ca ON ca.com_account_id=pa.com_account_id
        where pa.payment_account_id in
        <foreach collection="paymentAccountIds" index="index" item="item" open="(" separator="," close=")">
            #{item}
        </foreach>
    </select>

    <update id="updatePaymentAccount">
         update hf_payment_account set payment_id=#{paymentId} where is_active = 1
        <if test="paymentAccountList != null">
            <foreach collection="paymentAccountList" item="item" open="AND payment_account_id IN (" separator="," close=")">
                #{item}
            </foreach>
        </if>

    </update>


</mapper>
